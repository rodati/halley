core-production:

  accounts:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - name: TEXT
    - enabled: BOOLEAN
    - created_at:
      :source: createdAt
      :type: TIMESTAMP WITH TIME ZONE
    - updated_at:
      :source: updatedAt
      :type: TIMESTAMP WITH TIME ZONE
    - demo: BOOLEAN
    - plan: TEXT
    - free_users:
      :source: freeUsers
      :type: INTEGER
    :meta:
      :table: p00_accounts
      :extra_props: JSONB
      :incremental_replication_key: updated_at
      :table_init: |
        CLUSTER p00_accounts using p00_accounts_pkey;

  groups:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - account: TEXT
    - parent_group:
      :source: parent
      :type: TEXT
    - name: TEXT
    - country_code: TEXT
      :source: countryCode
      :type: TEXT
    - enabled: BOOLEAN
    - created_at:
      :source: createdAt
      :type: TIMESTAMP WITH TIME ZONE
    - language: TEXT
    - updated_at:
      :source: updatedAt
      :type: TIMESTAMP WITH TIME ZONE
    :meta:
      :table: p00_groups
      :extra_props: JSONB
      :composite_key:
      - id
      - account
      :incremental_replication_key: updated_at
      :table_init: |
        CREATE INDEX account_on_groups_idx ON p00_groups (account);
        CLUSTER p00_groups using account_on_groups_idx;

  groups_rbac_users:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - account: TEXT
    - user_name:
      :source: userName
      :type: TEXT
    - password: TEXT
    - first_name:
      :source: firstName
      :type: TEXT
    - last_name:
      :source: lastName
      :type: TEXT
    - gender: TEXT
    - phone: TEXT
    - cell_phone:
      :source: cellPhone
      :type: TEXT
    - email: TEXT
    - roles: TEXT
    - active: BOOLEAN
    - category: TEXT
    - group: TEXT
    :meta:
      :table: p00_groups_rbac_users
      :extra_props: JSONB
      :composite_key:
      - id
      - account
      :table_init: |
        CREATE INDEX group_on_groups_rbac_users_idx ON p00_groups_rbac_users ("group");
        CREATE INDEX account_on_groups_rbac_users_idx ON p00_groups_rbac_users (account);
        CLUSTER p00_groups_rbac_users USING account_on_groups_rbac_users_idx;

  prospects:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - account: TEXT
    - initial_group:
      :source: initialGroup
      :type: TEXT
    - group: TEXT
    - user: TEXT
    - user_group:
      :source: userGroup
      :type: TEXT
    - first_lead:
      :source: firstLead
      :type: TEXT
    - first_name:
      :source: firstName
      :type: TEXT
    - last_name:
      :source: lastName
      :type: TEXT
    - emails: JSONB
    - phones: JSONB
    - status: TEXT
    - last_action:
      :source: lastAction
      :type: TEXT
    - last_action_at:
      :source: lastActionAt
      :type: TIMESTAMP WITH TIME ZONE
    - created_at:
      :source: createdAt
      :type: TIMESTAMP WITH TIME ZONE
    - updated_at:
      :source: updatedAt
      :type: TIMESTAMP WITH TIME ZONE
    - enabled: BOOLEAN
    - first_contacted_at:
      :source: firstContactedAt
      :type: TIMESTAMP WITH TIME ZONE
    - next_interaction:
      :source: nextInteraction
      :type: TEXT
    - next_interaction_due_at:
      :source: nextInteractionDueAt
      :type: TIMESTAMP WITH TIME ZONE
    - next_interaction_type:
      :source: nextInteractionType
      :type: TEXT
    - label: TEXT
    - archiving_reason:
      :source: archivingReason
      :type: TEXT
    - category:
      :source: category
      :type: TEXT
      :retain_extra_prop: true
    - search_text_query:
      :source: searchTextQuery
      :type: TEXT
    :meta:
      :table: p00_prospects
      :extra_props: JSONB
      :composite_key:
      - id
      - account
      :incremental_replication_key: updated_at
      :table_init: |
        CREATE INDEX user_on_prospects_idx ON p00_prospects ("user");
        CREATE INDEX group_on_prospects_idx ON p00_prospects ("group");
        CREATE INDEX account_on_prospects_idx ON p00_prospects USING btree (account);
        CREATE INDEX first_lead_on_prospects_idx ON p00_prospects USING btree (first_lead);
        CREATE INDEX created_at_on_prospects_idx ON p00_prospects (created_at);
        CLUSTER p00_prospects USING account_on_prospects_idx;

  prospects_quotes:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - account: TEXT
    - group: TEXT
    - prospect: TEXT
    - oem_group:
      :source: oemGroup
      :type: TEXT
    - oem_account:
      :source: oemAccount
      :type: TEXT
    - created_at:
      :source: createdAt
      :type: TIMESTAMP WITH TIME ZONE
    - total: DOUBLE PRECISION
    - total_int:
      :source: totalInt
      :type: BIGINT
    - status: TEXT
    - accepted_by:
      :source: acceptedBy
      :type: TEXT
    - accepted_at:
      :source: acceptedAt
      :type: TIMESTAMP WITH TIME ZONE
    - updated_at:
      :source: updatedAt
      :type: TIMESTAMP WITH TIME ZONE
    :meta:
      :table: p00_prospects_quotes
      :extra_props: JSONB
      :composite_key:
      - id
      - account
      :incremental_replication_key: updated_at
      :table_init: |
        CREATE INDEX prospect_on_prospects_quotes_idx ON p00_prospects_quotes ("prospect");
        CREATE INDEX group_on_prospects_quotes_idx ON p00_prospects_quotes ("group");
        CREATE INDEX account_on_prospects_quotes_idx ON p00_prospects_quotes USING btree (account);
        CREATE INDEX created_at_on_prospects_quotes_idx ON p00_prospects_quotes (created_at);
        CREATE INDEX accepted_at_on_prospects_quotes_idx ON p00_prospects_quotes (accepted_at);
        CLUSTER p00_prospects_quotes USING account_on_prospects_quotes_idx;

  prospects_proposals:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - account: TEXT
    - prospect: TEXT
    - type: TEXT
    - source:
      :type: TEXT
      :retain_extra_prop: true   # TODO: once no one uses the extra prop, remove this
    - integration:
      :source: integration._id
      :type: TEXT
      :retain_extra_prop: true   # TODO: once no one uses the extra prop, remove this
    - integration_type:
      :source: integration.providerKey
      :type: TEXT
      :retain_extra_prop: true   # TODO: once no one uses the extra prop, remove this
    - provider_account:
      :source: providerAccount
      :type: TEXT
    - provider_group:
      :source: providerGroup
      :type: TEXT
    - created_at:
      :source: createdAt
      :type: TIMESTAMP WITH TIME ZONE
    - updated_at:
      :source: updatedAt
      :type: TIMESTAMP WITH TIME ZONE
    :meta:
      :table: p00_prospects_proposals
      :extra_props: JSONB
      :composite_key:
      - id
      - account
      :incremental_replication_key: updated_at
      :table_init: |
        CREATE INDEX prospect_on_prospects_proposals_idx ON p00_prospects_proposals ("prospect");
        CREATE INDEX account_on_prospects_proposals_idx ON p00_prospects_proposals USING btree (account);
        CREATE INDEX provider_account_on_prospects_proposals_idx ON p00_prospects_proposals USING btree (provider_account);
        CREATE INDEX provider_group_on_prospects_proposals_idx ON p00_prospects_proposals USING btree (provider_group);
        CREATE INDEX integration_on_prospects_proposals_idx ON p00_prospects_proposals USING btree (integration);
        CREATE INDEX created_at_on_prospects_proposals_idx ON p00_prospects_proposals USING btree (created_at);
        CLUSTER p00_prospects_proposals USING account_on_prospects_proposals_idx;

  prospects_interactions:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - account: TEXT
    - prospect: TEXT
    - group: TEXT
    - user: TEXT
    - enabled:
      :type: BOOLEAN
      :retain_extra_prop: true # TODO: once no one uses the extra prop, remove this
    - type: TEXT
    - created_at:
      :source: createdAt
      :type: TIMESTAMP WITH TIME ZONE
    - status: TEXT
    - started_at:
      :source: startedAt
      :type: TIMESTAMP WITH TIME ZONE
    - canceled_at:
      :source: canceledAt
      :type: TIMESTAMP WITH TIME ZONE
    - successful: BOOLEAN
    - finished_at:
      :source: finishedAt
      :type: TIMESTAMP WITH TIME ZONE
    - due_at:
      :source: dueAt
      :type: TIMESTAMP WITH TIME ZONE
    - updated_at:
      :source: updatedAt
      :type: TIMESTAMP WITH TIME ZONE
    :meta:
      :table: p00_prospects_interactions
      :extra_props: JSONB
      :composite_key:
      - id
      - account
      :incremental_replication_key: updated_at
      :table_init: |
        CREATE INDEX prospect_on_prospects_interactions_idx ON p00_prospects_interactions (prospect);
        CREATE INDEX user_on_prospects_interactions_idx ON p00_prospects_interactions ("user");
        CREATE INDEX group_on_prospects_interactions_idx ON p00_prospects_interactions ("group");
        CREATE INDEX account_on_prospects_interactions_idx ON p00_prospects_interactions USING btree (account);
        CREATE INDEX created_at_on_prospects_interactions_idx ON p00_prospects_interactions USING btree (created_at);
        CLUSTER p00_prospects_interactions USING account_on_prospects_interactions_idx;

  prospects_actions:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - account: TEXT
    - group: TEXT
    - prospect: TEXT
    - interaction:
      :type: TEXT
      :retain_extra_prop: true   # TODO: once no one uses the extra prop, remove this
    - user: TEXT
    - type: TEXT
    - created_at:
      :source: createdAt
      :type: TIMESTAMP WITH TIME ZONE
    - updated_at:
      :source: updatedAt
      :type: TIMESTAMP WITH TIME ZONE
    :meta:
      :table: p00_prospects_actions
      :extra_props: JSONB
      :composite_key:
      - id
      - account
      :incremental_replication_key: updated_at
      :table_init: |
        CREATE INDEX prospect_on_prospects_actions_idx ON p00_prospects_actions (prospect);
        CREATE INDEX user_on_prospects_actions_idx ON p00_prospects_actions ("user");
        CREATE INDEX group_on_prospects_actions_idx ON p00_prospects_actions ("group");
        CREATE INDEX account_on_prospects_actions_idx ON p00_prospects_actions USING btree (account);
        CREATE INDEX created_at_on_prospects_actions_idx ON p00_prospects_actions USING btree (created_at);
        CLUSTER p00_prospects_actions USING account_on_prospects_actions_idx;

  clients_configs:
    :columns:
    - id:
      :source: _id
      :type: TEXT
    - account: TEXT
    - group: TEXT
    - user: TEXT
    - config: JSONB
    :meta:
      :table: p00_clients_configs
      :table_init: |
        CREATE INDEX account_on_clients_configs_idx ON p00_clients_configs ("account");
        CREATE INDEX user_on_clients_configs_idx ON p00_clients_configs ("user");
        CREATE INDEX group_on_clients_configs_idx ON p00_clients_configs ("group");
